{"title":"Debug Infrastructure Documentation","created_at":"2014-08-17 19:55:00 UTC","author":"Ajit (MJPEG Optimisation)","content":"<div dir=\"ltr\" style=\"text-align: left;\" trbidi=\"on\">Debug infrastructure provides an easy interface for a developer to output data from the FPGA board for debugging. It is also useful for end users in case of troubleshooting.<br /><br /><h4 style=\"text-align: left;\">The BIG PICTURE:</h4><div><span id=\"docs-internal-guid-3c2e4da6-e57a-1e7f-99d8-25e94f272ef1\"><span style=\"font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;\"><img height=\"275px;\" src=\"https://docs.google.com/drawings/d/sWiUs9sKILX1TDoZ4QiVsLw/image?w=759&amp;h=275&amp;rev=39&amp;ac=1\" style=\"-webkit-transform: rotate(0.00rad); border: none; transform: rotate(0.00rad);\" width=\"759px;\" /></span></span></div><div><span><span style=\"font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;\"><br /></span></span></div><div><span><span style=\"font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;\">The debug data is collected into the debug_module which then breaks the data into bytes and sends them to UART module and USB_top module. These module send data via CDC/UART to host.</span></span></div><div><span><span style=\"font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;\"><br /></span></span></div><h3 style=\"text-align: left;\"><span><span style=\"font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;\">How to read output data?</span></span></h3><div><span><span style=\"font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;\">The output of UART/CDC are bytes. So to convert them to human readable format and hence allow easy debugging, a program fpga_debug.c has been provided which reads data from the fpga and then outputs data in correct format. </span></span></div><div><span><span style=\"font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;\">To compile fpga_debug.c</span></span></div><div><span><span style=\"font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;\">&gt; cd tools</span></span></div><div><span><span style=\"font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;\">&gt; make</span></span></div><div><span><span style=\"font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;\"><br /></span></span></div><div><span><span style=\"font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;\">To run debugging program</span></span></div><div><span><span style=\"font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;\">&gt; ./fpga_debug</span></span></div><div><br /></div><h4 style=\"text-align: left;\">How to add new debug data?&nbsp;</h4><div><ul style=\"text-align: left;\"><li>Route the data into debug_module</li><li>Break it into bytes and add to uart_byte_array</li><li>&nbsp;Change value of \"constant N_BYTES &nbsp;: integer\" appropriately</li><li>In fpga_debug add code to parse and output the new data</li></ul><div>You are done!</div></div><div><br /></div><div><br /></div><div><span><span style=\"font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;\"><br /></span></span></div></div><div class=\"author\">\n  <span>\n    <i>Originally posted on <a href=\"http://ajitmathewgsoc.blogspot.com/\">TimVideo GSoC 2014: MJPEG Optimisation</a></i>\n  </span>\n</div>\n"}