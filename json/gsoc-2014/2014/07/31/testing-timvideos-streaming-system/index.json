{"title":"Testing TimVideos Streaming System","created_at":"2014-07-31 00:00:00 UTC","author":"Amanpreet (Porting Flumotion)","content":"<p>Timvideos make heavy use of Flumotion for streaming live videos. So, I went ahead to test the ported Flumotion with the streaming system to fix the issue.</p>\n\n<p>I started out with the most important component, dvswitch-producer. For that, I needed a stream from dvswitch but it was crashing on Ubuntu 14.04 Trusty. So, as per Mithroâ€™s suggestion, I ran another Ubuntu 12.04 Precise VM simultaneously and created the stream there. Using this stream, I was able to watch the stream using this command</p>\n\n<div class=\"highlight\"><pre><code class=\"language-bash\" data-lang=\"bash\">gst-launch-1.0 -v dvswitchsrc <span class=\"nv\">hostname</span><span class=\"o\">=</span>192.168.0.17 <span class=\"nv\">port</span><span class=\"o\">=</span><span class=\"m\">2000</span> ! dvdemux ! dvdec ! autovideosink</code></pre></div>\n\n<p>But when I tried to run Flumotion stream, it failed with the following error.</p>\n\n<div class=\"highlight\"><pre><code class=\"language-bash\" data-lang=\"bash\">WARN  <span class=\"o\">[</span> 4699<span class=\"o\">]</span> <span class=\"s2\">&quot;producer-audio-video&quot;</span>           feedcomponent     Aug <span class=\"m\">01</span> 00:10:39      element /GstPipeline:pipeline-producer-audio-video/GstGDPPay:feeder:dv-pay error The stream is in the wrong format. gstgdppay.c<span class=\"o\">(</span>620<span class=\"o\">)</span>: gst_gdp_pay_chain <span class=\"o\">()</span>: /GstPipeline:pipeline-producer-audio-video/GstGDPPay:feeder:dv-pay:\nfirst received buffer does not have caps <span class=\"nb\">set</span> <span class=\"o\">(</span>flumotion/component/feedcomponent010.py:260<span class=\"o\">)</span>\nWARN  <span class=\"o\">[</span> 4699<span class=\"o\">]</span>                                  twisted           Aug <span class=\"m\">01</span> 00:10:39      A twisted traceback occurred. <span class=\"o\">(</span>twisted/python/threadable.py:53<span class=\"o\">)</span>\n\nTwisted traceback:\nTraceback <span class=\"o\">(</span>most recent call last<span class=\"o\">)</span>:\nFailure: flumotion.common.errors.GStreamerGstError: <span class=\"o\">(</span>&lt;__main__.GstGDPPay object at 0x7f4e6bc43eb0 <span class=\"o\">(</span>GstGDPPay at 0x18cc2e0<span class=\"o\">)</span>&gt;, GError<span class=\"o\">(</span><span class=\"s1\">&#39;The stream is in the wrong format.&#39;</span>,<span class=\"o\">)</span>, <span class=\"s1\">&#39;gstgdppay.c(620): gst_gdp_pay_chain (): /GstPipeline:pipeline-producer-audio-video/GstGDPPay:feeder:dv-pay:\\nfirst received buffer does not have caps set&#39;</span><span class=\"o\">)</span>\n\nINFO  <span class=\"o\">[</span> 4699<span class=\"o\">]</span> <span class=\"s2\">&quot;producer-audio-video&quot;</span>           component         Aug <span class=\"m\">01</span> 00:10:39      Logged in to manager <span class=\"o\">(</span>flumotion/component/component.py:87<span class=\"o\">)</span>\nWARN  <span class=\"o\">[</span> 4699<span class=\"o\">]</span> <span class=\"s2\">&quot;producer-audio-video&quot;</span>           feedcomponent     Aug <span class=\"m\">01</span> 00:10:39      element /GstPipeline:pipeline-producer-audio-video/GstDvswitchSrc:src error Internal data flow error. gstbasesrc.c<span class=\"o\">(</span>2865<span class=\"o\">)</span>: gst_base_src_loop <span class=\"o\">()</span>: /GstPipeline:pipeline-producer-audio-video/GstDvswitchSrc:src:\nstreaming task paused, reason not-negotiated <span class=\"o\">(</span>-4<span class=\"o\">)</span> <span class=\"o\">(</span>flumotion/component/feedcomponent010.py:260<span class=\"o\">)</span></code></pre></div><div class=\"author\">\n  <span>\n    <i>Originally posted on <a href=\"http://aps-sids.github.io/porting-flumotion\">Porting Flumotion - GSoC '14 Progress Blog</a></i>\n  </span>\n</div>\n"}