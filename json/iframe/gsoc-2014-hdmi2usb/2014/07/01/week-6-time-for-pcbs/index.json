{"title":"Week 6: Time for PCBs!","created_at":"2014-07-01 15:27:00 UTC","author":"Ayush (PTZ/Serial Extension)","content":"<br /><br />Motherboard schematics are ready and we’re all set to do the PCBs for motherboard! Last week was spent on organizing the repository, schematics and making various decisions that affected&nbsp;schematics. There is slightly more work to be done on daughterboards schematics and it needs more reviews and fixing.<br /><div><br />We began this week by figuring out the best possible autodetection scheme. We discussed about possible use cases for autodetection and how different autodetection schemes would fit into it. First scheme was measuring RC time constant using an I/O pin on the daughterboard. The problem with this scheme was that the RC time-constant measurement using an I/O pin is prone to errors since it depends on logic level thresholds of the I/O pin, which are not clearly documented and their errors are unknown. Slight change in the threshold values can affect our measurement greatly. These thresholds can depend on temperature, VCC, noise and production batch. A reliable way would be measuring the time constant using a voltage comparator and a precision voltage source. But this is the multimeter method and is a bit expensive.</div><br />I and Rohit (who’s doing VGA expansion board) settled for I2C EEPROM based detection where each daughterboard will have an inexpensive, pin addressable EEPROM storing ID and configuration data for that daughterboard. The EEPROM slave address gets set on the motherboard, the addresses depend on the slot the daughterboard is connected to.<br /><div><br />We were also suggested to take a look on SPI daisy-chaining of EEPROMs, because that would have been the most flexible auto-detection method. I2C based method is addressed based, all EEPROMs with slave address 0 will have expansion board data and EEPROMs with higher address would have module data. If we want to connect more than one expansion board by splitting VHDCI connector, there would be an address conflict in I2C based detection. SPI daisy-chaining would solve that. But it turns out that SPI daisy chaining is not possible for the reasons <a href=\"https://docs.google.com/document/d/1ZhDz50rve5UmnmyKynxySLHqfFuOwBPM7pYFoHo9uvs/edit#heading=h.psbm6zjrp5sz\">documented here</a> by Rohit.</div><div><br /></div><div><span id=\"docs-internal-guid-3f972578-f286-dca8-35bc-aac340d7de21\"></span><br /><div dir=\"ltr\" style=\"line-height: 1.15; margin-bottom: 0pt; margin-top: 0pt;\"><span id=\"docs-internal-guid-3f972578-f286-dca8-35bc-aac340d7de21\"><span style=\"font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;\">I had completed by first run of schematics which got reviewed by Tim. There was a heap of </span><a href=\"https://github.com/ayushsagar/HDMI2USB-vmodserial/issues?page=1&amp;state=closed\" style=\"text-decoration: none;\"><span style=\"color: #1155cc; font-family: Arial; font-size: 15px; text-decoration: underline; vertical-align: baseline; white-space: pre-wrap;\">issues</span></a><span style=\"font-family: Arial; font-size: 15px; vertical-align: baseline; white-space: pre-wrap;\"> with my repository as well as schematics that were fixed one by one.</span></span></div><span id=\"docs-internal-guid-3f972578-f286-dca8-35bc-aac340d7de21\"></span><br /><div dir=\"ltr\" style=\"margin-bottom: 0pt; margin-top: 0pt;\"><span id=\"docs-internal-guid-3f972578-f286-dca8-35bc-aac340d7de21\"><br /></span><span id=\"docs-internal-guid-3f972578-f286-dca8-35bc-aac340d7de21\">This week I started the daughterboards and created templates for them. I completed first run of RS232, IR, RS422, GPIO daughterboards. And there are issues with them to solve. It’ll probably take up to a day.</span><br /><span id=\"docs-internal-guid-3f972578-f286-dca8-35bc-aac340d7de21\"><br /></span><span id=\"docs-internal-guid-3f972578-f286-dca8-35bc-aac340d7de21\">I updated the requirements document to reflect our new decisions. This document never seems to finish because there’s always something new to add or update. As of now there are things to do in that document - like explaining the <a href=\"https://docs.google.com/drawings/d/1uRQora8VGWeG7skwKwVf6bYt5KVhYXLKmlrTFv6Yv6g/edit\">system diagram</a> I made. The information related to serial communication has become quite fragmented might needs to be more organised. I have to complete the power calculation spreadsheet which will bring out some new limitations and challenges.</span><br /><br /></div><span id=\"docs-internal-guid-3f972578-f286-dca8-35bc-aac340d7de21\"><b><u>Goals for this week:</u></b><br /> </span><br /><div dir=\"ltr\" style=\"margin-bottom: 0pt; margin-top: 0pt;\"><span id=\"docs-internal-guid-3f972578-f286-dca8-35bc-aac340d7de21\"><br /></span><span id=\"docs-internal-guid-3f972578-f286-dca8-35bc-aac340d7de21\">It seems we need to wind up the hardware part by this week. We need to:</span></div><span id=\"docs-internal-guid-3f972578-f286-dca8-35bc-aac340d7de21\"><ul><li>Finish daughterboards, get it reviewed.</li><li>Update requirements document.</li><li>Start PCB design, get quote from PCB manufacturers.</li><li>Once again, check and finalize daughterboard depth, motherboard depth and width.</li><li>(Hopefully) complete the motherboard PCB by this week.</li></ul>Here’s a peek at the latest schematics as of now, which you may want to compare it with the older ones in last week’s progress report :)<br /><div dir=\"ltr\" style=\"margin-bottom: 0pt; margin-top: 0pt;\"><br /></div><div class=\"separator\" style=\"clear: both; text-align: center;\"><a href=\"http://3.bp.blogspot.com/-Vwh88ia8YkY/U7LTJJqDRtI/AAAAAAAADJU/MBuY4sN7zZA/s1600/X_Page_1.png\" imageanchor=\"1\" style=\"margin-left: 1em; margin-right: 1em;\"><img border=\"0\" src=\"http://3.bp.blogspot.com/-Vwh88ia8YkY/U7LTJJqDRtI/AAAAAAAADJU/MBuY4sN7zZA/s1600/X_Page_1.png\" height=\"281\" width=\"400\" /></a></div><br /><div class=\"separator\" style=\"clear: both; text-align: center;\"><a href=\"http://4.bp.blogspot.com/-fiqplXs0fpU/U7LTJKRrYBI/AAAAAAAADJc/57o-DbIQOX4/s1600/X_Page_2.png\" imageanchor=\"1\" style=\"margin-left: 1em; margin-right: 1em;\"><img border=\"0\" src=\"http://4.bp.blogspot.com/-fiqplXs0fpU/U7LTJKRrYBI/AAAAAAAADJc/57o-DbIQOX4/s1600/X_Page_2.png\" height=\"282\" width=\"400\" /></a></div><br /><div class=\"separator\" style=\"clear: both; text-align: center;\"><a href=\"http://4.bp.blogspot.com/-oCgB8hVt6mU/U7LTJDUJr9I/AAAAAAAADJY/U4pj1cF04uk/s1600/X_Page_3.png\" imageanchor=\"1\" style=\"margin-left: 1em; margin-right: 1em;\"><img border=\"0\" src=\"http://4.bp.blogspot.com/-oCgB8hVt6mU/U7LTJDUJr9I/AAAAAAAADJY/U4pj1cF04uk/s1600/X_Page_3.png\" height=\"282\" width=\"400\" /></a></div><br /><div class=\"separator\" style=\"clear: both; text-align: center;\"><a href=\"http://1.bp.blogspot.com/-wgJbVl4KWiY/U7LTKL4ezSI/AAAAAAAADJo/0Cmz7WLpb_I/s1600/X_Page_4.png\" imageanchor=\"1\" style=\"margin-left: 1em; margin-right: 1em;\"><img border=\"0\" src=\"http://1.bp.blogspot.com/-wgJbVl4KWiY/U7LTKL4ezSI/AAAAAAAADJo/0Cmz7WLpb_I/s1600/X_Page_4.png\" height=\"282\" width=\"400\" /></a></div><br /><div class=\"separator\" style=\"clear: both; text-align: center;\"><a href=\"http://2.bp.blogspot.com/-vLsBLiMTT-s/U7LTKV2Mt8I/AAAAAAAADJ0/REvO1QLuXe0/s1600/X_Page_5.png\" imageanchor=\"1\" style=\"margin-left: 1em; margin-right: 1em;\"><img border=\"0\" src=\"http://2.bp.blogspot.com/-vLsBLiMTT-s/U7LTKV2Mt8I/AAAAAAAADJ0/REvO1QLuXe0/s1600/X_Page_5.png\" height=\"282\" width=\"400\" /></a></div><br /><div class=\"separator\" style=\"clear: both; text-align: center;\"><a href=\"http://2.bp.blogspot.com/-tc2awGyo5qc/U7LTKi44DOI/AAAAAAAADJw/8GppNRDh5cc/s1600/X_Page_6.png\" imageanchor=\"1\" style=\"margin-left: 1em; margin-right: 1em;\"><img border=\"0\" src=\"http://2.bp.blogspot.com/-tc2awGyo5qc/U7LTKi44DOI/AAAAAAAADJw/8GppNRDh5cc/s1600/X_Page_6.png\" height=\"282\" width=\"400\" /></a></div><br /><div class=\"separator\" style=\"clear: both; text-align: center;\"><a href=\"http://4.bp.blogspot.com/-9Qr6_G2ffeA/U7LTLexiwVI/AAAAAAAADJ8/U8XCa4LpzG4/s1600/X_Page_7.png\" imageanchor=\"1\" style=\"margin-left: 1em; margin-right: 1em;\"><img border=\"0\" src=\"http://4.bp.blogspot.com/-9Qr6_G2ffeA/U7LTLexiwVI/AAAAAAAADJ8/U8XCa4LpzG4/s1600/X_Page_7.png\" height=\"282\" width=\"400\" /></a></div><div dir=\"ltr\" style=\"margin-bottom: 0pt; margin-top: 0pt;\"><br /></div></span></div><div><br /></div><div><br /></div><div class=\"author\">\n  <span>\n    <i>Originally posted on <a href=\"http://ptzfortimvideos-gsoc14.blogspot.com/\">Serial port expansion for HDMI2USB with PTZ camera control example</a></i>\n  </span>\n</div>\n"}