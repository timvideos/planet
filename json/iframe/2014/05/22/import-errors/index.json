{"title":"Import Errors","content":"---\ntitle: \"Import errors\"\nkind: article\ncreated_at: 2014-05-22 07:00:00 UTC\nauthor: Amanpreet (Porting Flumotion)\nimage: https://avatars2.githubusercontent.com/u/2363074?s=50\ncategories: GSoC-2014\ntags: \"news flumotion\"\nlayout: post\n---<p>While porting the base modules and running the respective tests, I have encountered the same error which was there for previous GSoC student. Basically, its the ImportError conflict since introspected and static glib/gtk bindings must not be mixed as evident by the following error:</p>\n\n<div class=\"highlight\"><pre><code class=\"python\"><span class=\"n\">flumotion</span>\n  <span class=\"n\">test</span>\n    <span class=\"n\">test_common_gstreamer</span> <span class=\"o\">...</span>                                           <span class=\"p\">[</span><span class=\"n\">ERROR</span><span class=\"p\">]</span>\n\n<span class=\"o\">===============================================================================</span>\n<span class=\"p\">[</span><span class=\"n\">ERROR</span><span class=\"p\">]</span>\n<span class=\"n\">Traceback</span> <span class=\"p\">(</span><span class=\"n\">most</span> <span class=\"n\">recent</span> <span class=\"n\">call</span> <span class=\"n\">last</span><span class=\"p\">):</span>\n  <span class=\"n\">File</span> <span class=\"s\">&quot;/usr/lib/python2.7/dist-packages/twisted/trial/runner.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">660</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">loadByNames</span>\n    <span class=\"n\">things</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">findByName</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"p\">))</span>\n  <span class=\"n\">File</span> <span class=\"s\">&quot;/usr/lib/python2.7/dist-packages/twisted/trial/runner.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">470</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">findByName</span>\n    <span class=\"k\">return</span> <span class=\"n\">reflect</span><span class=\"o\">.</span><span class=\"n\">namedAny</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s\">&quot;/usr/lib/python2.7/dist-packages/twisted/python/reflect.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">464</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">namedAny</span>\n    <span class=\"n\">topLevelPackage</span> <span class=\"o\">=</span> <span class=\"n\">_importAndCheckStack</span><span class=\"p\">(</span><span class=\"n\">trialname</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s\">&quot;/home/aps/workspace/gsoc/flumotion-orig/flumotion/test/test_common_gstreamer.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">21</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"o\">&lt;</span><span class=\"n\">module</span><span class=\"o\">&gt;</span>\n    <span class=\"kn\">from</span> <span class=\"nn\">flumotion.common</span> <span class=\"kn\">import</span> <span class=\"n\">gstreamer</span>\n  <span class=\"n\">File</span> <span class=\"s\">&quot;/home/aps/workspace/gsoc/flumotion-orig/flumotion/common/gstreamer.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">25</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"o\">&lt;</span><span class=\"n\">module</span><span class=\"o\">&gt;</span>\n    <span class=\"kn\">import</span> <span class=\"nn\">gi</span>\n  <span class=\"n\">File</span> <span class=\"s\">&quot;/usr/lib/python2.7/dist-packages/gi/__init__.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">23</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"o\">&lt;</span><span class=\"n\">module</span><span class=\"o\">&gt;</span>\n    <span class=\"kn\">from</span> <span class=\"nn\">._gi</span> <span class=\"kn\">import</span> <span class=\"n\">_API</span><span class=\"p\">,</span> <span class=\"n\">Repository</span>\n<span class=\"n\">exceptions</span><span class=\"o\">.</span><span class=\"n\">ImportError</span><span class=\"p\">:</span> <span class=\"n\">could</span> <span class=\"ow\">not</span> <span class=\"kn\">import</span> <span class=\"nn\">gobject</span> <span class=\"p\">(</span><span class=\"n\">error</span> <span class=\"n\">was</span><span class=\"p\">:</span> <span class=\"ne\">ImportError</span><span class=\"p\">(</span><span class=\"s\">&#39;When using gi.repository you must not import static modules like &quot;gobject&quot;. Please change all occurrences of &quot;import gobject&quot; to &quot;from gi.repository import GObject&quot;.&#39;</span><span class=\"p\">,))</span>\n\n<span class=\"n\">flumotion</span><span class=\"o\">.</span><span class=\"n\">test</span><span class=\"o\">.</span><span class=\"n\">test_common_gstreamer</span>\n<span class=\"o\">-------------------------------------------------------------------------------</span>\n<span class=\"n\">Ran</span> <span class=\"mi\">1</span> <span class=\"n\">tests</span> <span class=\"ow\">in</span> <span class=\"mf\">0.003</span><span class=\"n\">s</span>\n\n<span class=\"n\">FAILED</span> <span class=\"p\">(</span><span class=\"n\">errors</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"p\">)</span>\n</code></pre></div>\n\n<p>Now, I suspect there could be two reasons for this:</p>\n\n<ol>\n  <li>We need to port all the modules before testing</li>\n  <li>Twisted 12 is not compatible with gi</li>\n</ol>\n\n<p>I am looking into this issue right now. Previous studentâ€™s blog posts suggest some ideas but those seem unclear/wrong.</p><div class=\"author\">\n  <span>\n    <i>Originally posted on <a href=\"http://aps-sids.github.io/porting-flumotion\">Porting Flumotion - GSoC '14 Progress Blog</a></i>\n  </span>\n</div>\n"}