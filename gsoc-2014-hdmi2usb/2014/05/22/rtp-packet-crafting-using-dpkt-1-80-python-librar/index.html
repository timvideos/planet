<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8"/>
  <title>TimVideos.us Planet - Developers News</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
  <meta name="description" content="News from our best developers, all news aggregated by planet."/>
  <link rel="alternate" type="application/atom+xml" title="Tim Videos Planet Feed" href="/feed.xml" />
  <link rel="canonical" href="http://planet.timvideos.us/gsoc-2014-hdmi2usb/2014/05/22/rtp-packet-crafting-using-dpkt-1-80-python-librar//">
  <link href="/css/jquery.fancybox.css?v=2.1.5" rel="stylesheet"/>
  <link href="/css/bootstrap.min.css" rel="stylesheet" />
  <link href="/css/font-awesome.min.css" rel="stylesheet" />
  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <link href="/css/styles.css" rel="stylesheet" />
</head>
  <body>
    <div class="wrapper">
      <div class="box">
        <div class="row">
          <div class="column col-sm-3 col-md-3 col-lg-2" id="sidebar">
  <a class="logo" href="/">
    <img src="/img/logo.png" />
    <span>PLANET</span>
  </a>
  <ul class="nav">
    <li class="active">
      <a href="/">NEWS</a>
    </li>
    <li class="">
      <a href="/github/">GITHUB ACTIVITIES</a>
    </li>
  </ul>
  <ul class="nav hidden-xs" id="sidebar-footer">
    <li class="social">
      <a href="/feed.xml"><i class="fa fa-rss"></i></a>
      <a href="/feed.opml"><i class="fa fa-dot-circle-o"></i></a>
      <a href="http://www.twitter.com/TimVideosUs"><i class="fa fa-twitter"></i></a>
    </li>
    <li>
      <span>Proudly hosted by <a id="github" href="http://www.github.com">GitHub</a>
      </span>
    </li>
  </ul>
</div>
          <div class="column col-sm-9 col-md-9 col-lg-10" id="main">
            <div class="padding">
              <div class="col-sm-12">
  <div class="panel panel-default" id="featured">
    <div class="panel-body">
      
        <h4>gsoc-2014-hdmi2usb</h4>
      
      <h1>RTP packet crafting using dpkt-1.80 Python library</h1>
      <div class="article">
        <p class="meta description">
          May 22, 2014
           â€¢ Tariq (Ethernet Support)
          
        </p>
        
          <p class="tags">
            <span>Tags: </span>
            
              <span class="label label-tag">
                news
              </span>
            
              <span class="label label-tag">
                hdmi2usb
              </span>
            
              <span class="label label-tag">
                ethernet
              </span>
            
          </p>
        
        <p class="share-buttons">
  <span>Share: </span>
  <span class="share-button"><a href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fplanet.timvideos.us%2Fgsoc-2014-hdmi2usb%2F2014%2F05%2F22%2Frtp-packet-crafting-using-dpkt-1-80-python-librar%2F" target="_blank"><i class="fa fa-facebook-square fa-2x"></i></a></span>
  <span class="share-button"><a href="https://twitter.com/intent/tweet?source=http%3A%2F%2Fplanet.timvideos.us%2Fgsoc-2014-hdmi2usb%2F2014%2F05%2F22%2Frtp-packet-crafting-using-dpkt-1-80-python-librar%2F&text=TimVideos.us%20RTP+packet+crafting+using+dpkt-1.80+Python+library%20http%3A%2F%2Fplanet.timvideos.us%2Fgsoc-2014-hdmi2usb%2F2014%2F05%2F22%2Frtp-packet-crafting-using-dpkt-1-80-python-librar%2F" target="_blank" title="Tweet"><i class="fa fa-twitter-square fa-2x"></i></a></span>
  <span class="share-button"><a href="https://plus.google.com/share?url=http%3A%2F%2Fplanet.timvideos.us%2Fgsoc-2014-hdmi2usb%2F2014%2F05%2F22%2Frtp-packet-crafting-using-dpkt-1-80-python-librar%2F" target="_blank" title="Share on Google+"><i class="fa fa-google-plus-square fa-2x"></i></a></span>
</p>
        <p class="article">
          <span style="font-size: large;">Installing <a href="http://code.google.com/p/dpkt/downloads/list">dpkt-1.80.tar.gz</a> was trickier than i thought. Python is not easy to master. I always learn something new when i start to work on it. The problem with dpkt is the poor documentation right from the start. Installation was quite an issue for me but later in the afternoon, i figured out the correct way to do it. Before that i was trying to import modules from the dpkt directory but something in the code would keep on breaking. Dpkt project suffers from poor documentation of the source code as well and lack of examples to use the library.I had to try out a couple of things before i was able to create the RTP packets. Part of this effort was googling looking for code samples using dpkt. Unfortunately, there were not many.</span><br /><span style="font-size: large;">Anyway, here is the RTP code that i have coded</span><br /><span style="font-size: large;"><br /></span><br /><span style="color: blue;">#trying to send rtp packet</span><br /><span style="color: blue;">#by Tariq B. Ahmad</span><br /><span style="color: blue;"># 5/21/2014</span><br /><span style="color: blue;"><br /></span><span style="color: blue;">import dpkt</span><br /><span style="color: blue;">import socket</span><br /><span style="color: blue;"><br /></span><span style="color: blue;">rtp_pkt = dpkt.rtp.RTP()</span><br /><span style="color: blue;">rtp_pkt.data = '''HelloWorldHelloWorldHelloWorldHelloWorld</span><br /><span style="color: blue;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HelloWorldHelloWorldHelloWorldHelloWorld</span><br /><span style="color: blue;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HelloWorldHelloWorldHelloWorldHelloWorld</span><br /><span style="color: blue;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HelloWorldHelloWorldHelloWorldHelloWorld</span><br /><span style="color: blue;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HelloWorldHelloWorldHelloWorldHelloWorld</span><br /><span style="color: blue;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HelloWorldHelloWorldHelloWorldHelloWorld</span><br /><span style="color: blue;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HelloWorldHelloWorldHelloWorldHelloWorld</span><br /><span style="color: blue;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HelloWorldHelloWorldHelloWorldHelloWorld</span><br /><span style="color: blue;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HelloWorldHelloWorldHelloWorldHelloWorld</span><br /><span style="color: blue;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HelloWorldHelloWorldHelloWorldHelloWorld</span><br /><span style="color: blue;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HelloWorldHelloWorldHelloWorldHelloWorld</span><br /><span style="color: blue;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HelloWorldHelloWorldHelloWorldHelloWorld</span><br /><span style="color: blue;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HelloWorldHelloWorldHelloWorldHelloWorld</span><br /><span style="color: blue;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HelloWorldHelloWorldHelloWorldHelloWorld</span><br /><span style="color: blue;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HelloWorldHelloWorldHelloWorldHelloWorld</span><br /><span style="color: blue;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HelloWorldHelloWorldHelloWorldHelloWorld</span><br /><span style="color: blue;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HelloWorldHelloWorldHelloWorldHelloWorld</span><br /><span style="color: blue;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HelloWorldHelloWorldHelloWorldHelloWorld</span><br /><span style="color: blue;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HelloWorldHelloWorldHelloWorldHelloWorld</span><br /><span style="color: blue;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HelloWorldHelloWorldHelloWorldHelloWorld</span><br /><span style="color: blue;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HelloWorldHelloWorldHelloWorldHelloWorld</span><br /><span style="color: blue;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HelloWorldHelloWorldHelloWorldHelloWorld</span><br /><span style="color: blue;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HelloWorldHelloWorldHelloWorldHelloWorld</span><br /><span style="color: blue;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HelloWorldHelloWorldHelloWorldHelloWorld</span><br /><span style="color: blue;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HelloWorldHelloWorldHelloWorldHelloWorld</span><br /><span style="color: blue;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HelloWorldHelloWorldHelloWorldHelloWorld</span><br /><span style="color: blue;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; '''</span><br /><span style="color: blue;"><br /></span><span style="color: blue;">udp_pkt = dpkt.udp.UDP(sport=11111,dport=11112)</span><br /><span style="color: blue;">udp_pkt.data = rtp_pkt.data</span><br /><span style="color: blue;">udp_pkt.ulen += len(udp_pkt.data)</span><br /><span style="color: blue;"><br /></span><span style="color: blue;">ip_pkt = dpkt.ip.IP(id=0, src='\x01\x02\x03\x04', dst='\xc0\xa8\x7a\x01', p=17) # p=17 for udp</span><br /><span style="color: blue;">ip_pkt.data = udp_pkt.data</span><br /><span style="color: blue;">ip_pkt.len += len(ip_pkt.data)</span><br /><span style="color: blue;"><br /></span><span style="color: blue;">s = socket.socket(socket.AF_INET, socket.SOCK_RAW, dpkt.ip.IP_PROTO_UDP)</span><br /><span style="color: blue;">s.connect(('192.168.122.1', 11112))</span><br /><span style="color: blue;">#print str(ip_pkt)</span><br /><span style="color: blue;">sent = s.send(str(ip_pkt))</span><br /><span style="color: blue;"><br /></span>  <span style="color: blue;">print 'sent %d bytes' % sent</span><br /><span style="color: blue;"><br /></span><br /><span style="color: blue;"><br /></span>Here is the output when you run the script. You have to be the root user in Linux to use socket functionality.<br /><br /><span style="color: orange;">sent 1554 bytes</span><br /><div><br /></div><br />I tried to capture this using Wireshark by listening to the interface on 192.168.122.1 but Wireshark could not capture this. I have googled this and other people have reported the same issue.<br /><br />If i have some time tomorrow, i shall use Scapy library to see if i can do the same or better with Scapy.<br />Cheerz and tomorrow is MyHDL day<br /><br /><br /><br />I also received my Xilinx Atlys board today !!!<div class="author">
  <span>
    <i>Originally posted on <a href="http://hdmi2ethernet.blogspot.com/">GSOC 2014</a></i>
  </span>
</div>

        </p>
      </div>
    </div>
  </div>
</div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/jquery.fancybox.pack.js?v=2.1.5"></script>
<script src="/js/planet.js"></script>

  </body>
</html>