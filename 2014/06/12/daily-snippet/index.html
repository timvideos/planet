---
title: "Daily snippet"
kind: article
created_at: 2014-06-12 05:19:00 UTC
author: Ayush (PTZ/Serial Extension)
image: https://avatars0.githubusercontent.com/u/4787914?s=50
categories: GSoC-2014-HDMI2USB
tags: "news hdmi2usb ptz serial-extension"
layout: post
---<div dir="ltr" style="text-align: left;" trbidi="on"><style type="text/css">p { margin-bottom: 0.25cm; line-height: 120%; }</style>  <br /><div style="text-align: left;"><br /><ul><li>I couldn't meet the deadline for getting the spec doc ready, was away whole day.</li><li>But at night I did some deep investigation on serial and got very interesting results.</li><li>Recall  that an Endpoint has two directions IN (towards host) and OUT (away  from host) except when control transfer is used, which is bidirectional.  Bulk, Interrupt and Isochronous transfers are unidirectional and a  direction needs to be specified in the Endpoint description.</li><li>EP0 is a control endpoint and doesn't have IN/OUT direction since it's bidirectional</li><li>We can have BULK IN/BULK OUT on the SAME endpoint number. Search <a href="http://wiki.osdev.org/Universal_Serial_Bus" target="_blank">here</a> for the string&nbsp;"two endpoints may have the same endpoint number but opposing data transfer directions"<span style="font-family: sans-serif; font-size: x-small;"><span style="background-color: white; line-height: 19.200000762939453px;">.</span></span></li><li>See the three variants of CDC ACM serial devices over <a href="http://www.thesycon.de/eng/usb_cdcacm_ce.shtml" target="_blank">here</a>.  We want to use a Bulk-only protocol because that's what we have been  effectively using. It takes only 1 EP for implementing Bulk-only  protocol.</li><li>Take a look at <a href="https://docs.google.com/spreadsheets/d/1j8ddwDzGRI8FZ8g7eI2wMwBOZ7AQ7Ft_pCV2-mSTSwI/edit#gid=0" target="_blank">this spreadsheet</a> based on my <a href="http://pastebin.com/5pyinsWz" target="_blank">lsbusb -v output</a> of HDMI2USB. It also has a tentative plan of how the endpoints can end up for 8 serial expansion ports</li><li>What  Jahanzeb's code has implemented is that he used different endpoints EP4  and EP6 for bulk in and bulk out which is not necessary. He has also  implemented an Interrupt IN on EP1 on Cypress FX2LP which is not being  used by the FPGA (in usbtop.vhd).</li><li>We have some cleaning up to do  in the Cypress FX2LP. And it seems we can have more serial ports (11 I  guess) with space for proposed endpoints for UVC A/B preview and HDMI  Audio. Let's have just have up to 8 serial ports and leave remaining end  points for other possible uses?</li><li>Still investigating whether the standard CDC ACM drivers compulsorily requires the INTERRUPT IN endpoint or not.</li></ul></div></div><div class="author">
  <span>
    <i>Originally posted on <a href="http://ptzfortimvideos-gsoc14.blogspot.com/">Serial port expansion for HDMI2USB with PTZ camera control example</a></i>
  </span>
</div>
