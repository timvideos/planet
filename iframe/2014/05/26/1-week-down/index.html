---
title: "1 Week Down!"
kind: article
created_at: 2014-05-26 09:36:00 UTC
author: Ajit (MJPEG Optimisation)
image: https://avatars3.githubusercontent.com/u/7080716?s=50
categories: GSoC-2014-HDMI2USB
tags: "news hdmi2usb mjpeg"
layout: post
---<div dir="ltr" style="text-align: left;" trbidi="on">In the past week I stuck to my goal of improving the fmax of MPEG coder. I tried to run at 105 Mhz(because clock dividers should be integer) but timing constraints failed. Tried a bunch of stuff but didn't succeed. Then I finally ran the MPEG&nbsp; core at 90 MHz. All timing constraints were met but there was no improvement in the speed which was a bummer. Anyway during weekend I tried an optimisation but was not able to run it successfully on the hardware. The JPEG top module has the following FSM<br /><span id="docs-internal-guid-4a60888b-3909-effc-cfe1-2b61062e4cfd" style="background-color: transparent; color: black; font-family: Arial; font-size: 15px; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: none; vertical-align: baseline;"><img height="435px;" src="https://lh6.googleusercontent.com/sMdikks2vdnZoBay_x7ywnSkX5JFG_szu8TwvWCTkLc3W9dGYoE6Uk1q8EduEZjvbGNEG98syDIY3XKTAx5V_N7I13nsQyKFS6Lgi0MbxZngnkfNL5-qMsvUrYXlicLq6w" style="border: medium none; transform: rotate(0rad);" width="580px;" /></span> <br /><br />As you can see, after every frame compressed lumination and chrome tables are written again. Plus because of the OPB interface, there is atleast a cycle long wait for ack. So for every frame 512*2=1024 cycles are wasted when a frames is compressed. So I was trying to change the FSM so that the table writing step is bypassed if there is no command to change the encoding quality. Unfortunately my changes are not working on hardware. I am planning to spend some time on it. Also I plan to check the efficieny of HDMI2USB minus the cypress firmware so that I can test whether or not the cypress is slowing down HDMI2USB. Finally I am planning to start modifying the code for 4:2:0 sub sampling. This will take some time as I need to rewrite the FSM of JPEG core. This will probably take 2 weeks. Hope this week gives me some positive results.</div><div class="author">
  <span>
    <i>Originally posted on <a href="http://ajitmathewgsoc.blogspot.com/">TimVideo GSoC 2014: MJPEG Optimisation</a></i>
  </span>
</div>
